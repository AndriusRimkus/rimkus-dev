---
title: 'React Notes'
description: 'Collection of React concepts and patterns worth remembering.'
pubDate: 'Dec 09 2025'
category: 'react'
---

## UseEffect

`useEffect()` is an escape hatch for synchronizing with external systems (APIs, DOM manipulation, third-party libraries, browser APIs).
It should not be used for orchestrating the state. React linters will warn against that.

[useEffect() documentation](https://react.dev/reference/react/useEffect) | [You Might Not Need an Effect](https://react.dev/learn/you-might-not-need-an-effect)

### Dependency Patterns

**With dependencies** - runs after the initial render and when dependencies change:

```tsx
useEffect(() => {
  fetchData(userId);
}, [userId]);
```

**No dependencies** - runs after every render:

```tsx
useEffect(() => {
  console.log('Runs on every render');
});
```

**Empty array** - runs once after initial mount:

```tsx
useEffect(() => {
  const connection = connectToServer();
}, []);
```

### Cleanup Function

Return a function from `useEffect()` to clean up side effects. It runs before the effect re-executes and when the component unmounts.
Cleanup functions capture state/props from the previous render (old scope).

```tsx
useEffect(() => {
  const subscription = api.subscribe(id);
  
  return () => {
    subscription.unsubscribe();
  };
}, [id]);
```

Common cleanup use cases: clearing timers, canceling requests, unsubscribing from events.

### Dev Strict Mode

In development, React runs effects twice to help find bugs. This only happens in Strict Mode.

```tsx
useEffect(() => {
  console.log('You should see me twice in dev mode');
  return () => console.log('And me in between!');
}, []);
```

[Strict Mode documentation](https://react.dev/reference/react/StrictMode)

### useEffectEvent()

Allows defining event handlers that always have access to the latest state and props without needing to include them in the dependency array.

```tsx
const onVisit = useEffectEvent((url) => {
  logAnalytics(url, shoppingCart);
});

useEffect(() => {
  onVisit(url);
}, [url]);
```

[useEffectEvent documentation](https://react.dev/reference/react/useEffectEvent)

### Timeline

There could be more nuances to this, but generally the order of things is as follows:

1. Component render logic
2. React commits to DOM
3. `useLayoutEffect()` cleanup
4. `useLayoutEffect()` effect
5. Browser paints
6. `useEffect()` cleanup
7. `useEffect()` effect

Important notes:
- `useLayoutEffect()` runs before the browser paints, blocking visual updates until it's done.
- Cleanup functions capture state/props from the previous render (old scope).

## Memoization

Different from how Vue.js operates, React reexecutes Component function body on every render cycle.

Main re-render triggers include:

- Parent component re-renders
- State (useState) or props change
- Context value changes

### React Compiler

Latest React docs highly recommend using the [React Compiler](https://react.dev/learn/react-compiler) to optimize re-renders automatically.
That allows basically forgetting about memoization in vast majority of cases.

### React.memo

Outputs a higher-order component which skips re-rendering when the parent re-renders, given the props are the same (shallow comparison).

```tsx
const MemoizedComponent = React.memo(function MyComponent({ name }) {
    return <div>Hello, {name}</div>;
});
```

[React.memo documentation](https://react.dev/reference/react/memo)

### useMemo()

A React hook producing a memoized value. Recomputes the value only when one of the dependencies change.
Often used together with React.memo.

```tsx
const expensiveValue = useMemo(() => {
    return computeExpensiveValue(a, b);
}, [a, b]);
```

[useMemo documentation](https://react.dev/reference/react/useMemo)

### useCallback()

Caches a function definition between re-renders. It does not execute the function.
It's syntactic sugar for useMemo when the memoized value is a function.

```tsx
const handleClick = useCallback(() => {
    doSomething(a, b);
}, [a, b]);
```

[useCallback documentation](https://react.dev/reference/react/useCallback)
